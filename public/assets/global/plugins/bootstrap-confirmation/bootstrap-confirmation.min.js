/*!
 * Bootstrap Confirmation
 * Copyright 2013 Nimit Suwannagate <ethaizone@hotmail.com>
 * Copyright 2014-2016 Damien "Mistic" Sorel <http://www.strangeplanet.fr>
 * Licensed under the Apache License, Version 2.0 (the "License")
 */
(function(c){if(!c.fn.popover){throw new Error("Confirmation requires popover.js")}var d=function(f,e){e.trigger="click";this.init("confirmation",f,e);this.options._isDelegate=false;if(e.selector){this.options._selector=this._options._selector=e._root_selector+" "+e.selector}else{if(e._selector){this.options._selector=e._selector;this.options._isDelegate=true}else{this.options._selector=e._root_selector}}var g=this;if(!this.options.selector){this.options._attributes={};if(this.options.copyAttributes){if(typeof this.options.copyAttributes==="string"){this.options.copyAttributes=this.options.copyAttributes.split(" ")}}else{this.options.copyAttributes=[]}this.options.copyAttributes.forEach(function(h){this.options._attributes[h]=this.$element.attr(h)},this);this.$element.on(g.options.trigger,function(h,i){if(!i){h.preventDefault();h.stopPropagation();h.stopImmediatePropagation()}});this.$element.on("show.bs.confirmation",function(h){if(g.options.singleton){c(g.options._selector).not(c(this)).filter(function(){return c(this).data("bs.confirmation")!==undefined}).confirmation("hide")}})}if(!this.options._isDelegate){this.eventBody=false;this.uid=this.$element[0].id||this.getUID("group_");this.$element.on("shown.bs.confirmation",function(i){if(g.options.popout&&!g.eventBody){var h=c(this);g.eventBody=c("body").on("click.bs.confirmation."+g.uid,function(j){if(c(g.options._selector).is(j.target)){return}c(g.options._selector).filter(function(){return c(this).data("bs.confirmation")!==undefined}).confirmation("hide");c("body").off("click.bs."+g.uid);g.eventBody=false})}})}};d.DEFAULTS=c.extend({},c.fn.popover.Constructor.DEFAULTS,{placement:"top",title:"Are you sure?",html:true,popout:false,singleton:false,copyAttributes:"href target",onConfirm:c.noop,onCancel:c.noop,btnOkClass:"btn-xs btn-primary",btnOkIcon:"glyphicon glyphicon-ok",btnOkLabel:"Yes",btnCancelClass:"btn-xs btn-default",btnCancelIcon:"glyphicon glyphicon-remove",btnCancelLabel:"No",template:'<div class="popover confirmation"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content text-center"><div class="btn-group"><a class="btn" data-apply="confirmation"></a><a class="btn" data-dismiss="confirmation"></a></div></div></div>'});d.prototype=c.extend({},c.fn.popover.Constructor.prototype);d.prototype.constructor=d;d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.setContent=function(){var e=this,g=this.tip(),f=this.options;g.find(".popover-title")[f.html?"html":"text"](this.getTitle());g.find('[data-apply="confirmation"]').addClass(f.btnOkClass).html(f.btnOkLabel).attr(this.options._attributes).prepend(c("<i></i>").addClass(f.btnOkIcon)," ").off("click").one("click",function(h){e.getOnConfirm.call(e).call(e.$element);e.$element.trigger("confirmed.bs.confirmation");e.$element.trigger(e.options.trigger,[true]);e.$element.confirmation("hide")});g.find('[data-dismiss="confirmation"]').addClass(f.btnCancelClass).html(f.btnCancelLabel).prepend(c("<i></i>").addClass(f.btnCancelIcon)," ").off("click").one("click",function(h){e.getOnCancel.call(e).call(e.$element);if(e.inState){e.inState.click=false}e.$element.trigger("canceled.bs.confirmation");e.$element.confirmation("hide")});g.removeClass("fade top bottom left right in");if(!g.find(".popover-title").html()){g.find(".popover-title").hide()}};d.prototype.getOnConfirm=function(){if(this.$element.attr("data-on-confirm")){return b(this.$element.attr("data-on-confirm"))}else{return this.options.onConfirm}};d.prototype.getOnCancel=function(){if(this.$element.attr("data-on-cancel")){return b(this.$element.attr("data-on-cancel"))}else{return this.options.onCancel}};function b(k){var g=window,j=k.split("."),h=j.pop();for(var f=0,e=j.length;f<e;f++){g=g[j[f]]}return function(){g[h].call(this)}}var a=c.fn.confirmation;c.fn.confirmation=function(f){var e=(typeof f=="object"&&f)||{};e._root_selector=this.selector;return this.each(function(){var h=c(this),g=h.data("bs.confirmation");if(!g&&f=="destroy"){return}if(!g){h.data("bs.confirmation",(g=new d(this,e)))}if(typeof f=="string"){g[f]();if(f=="hide"&&g.inState){g.inState.click=false}}})};c.fn.confirmation.Constructor=d;c.fn.confirmation.noConflict=function(){c.fn.confirmation=a;return this}}(jQuery));